<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Lab: Interactive Experiments | Brooklyn Corbett</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --cream: #F1DDC4;
            --rust: #75352D;
            --dark-burgundy: #3A1213;
            --soft-blue: #92A4D2;
            --sage: #7fa8a8;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: #2c2c2c;
            background: linear-gradient(135deg, #fafafa 0%, #f5f0eb 100%);
            min-height: 100vh;
            padding: 30px 20px;
        }

        .back-button {
            display: inline-block;
            background: var(--dark-burgundy);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(58, 18, 19, 0.2);
        }

        .back-button:hover {
            background: var(--rust);
            transform: translateY(-2px);
        }

        .demo-container {
            max-width: 1100px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 50px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 3px solid var(--cream);
        }

        h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 3em;
            color: var(--dark-burgundy);
            margin-bottom: 10px;
            font-weight: 700;
        }

        .subtitle {
            font-size: 1.2em;
            color: var(--rust);
            font-weight: 500;
        }

        .intro-text {
            max-width: 850px;
            margin: 0 auto 40px;
            padding: 25px 30px;
            background: linear-gradient(135deg, var(--cream) 0%, #f8ece0 100%);
            border-radius: 12px;
            border-left: 5px solid var(--rust);
            font-size: 1.05em;
            line-height: 1.8;
        }

        .experiment-nav {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 15px;
            margin-bottom: 40px;
        }

        .nav-card {
            background: white;
            border: 2px solid #e8e8e8;
            border-radius: 12px;
            padding: 20px 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-card:hover {
            border-color: var(--soft-blue);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(146, 164, 210, 0.2);
        }

        .nav-card.active {
            border-color: var(--rust);
            background: linear-gradient(135deg, var(--cream) 0%, white 100%);
            box-shadow: 0 4px 15px rgba(117, 53, 45, 0.15);
        }

        .nav-card .card-number {
            display: inline-block;
            width: 28px;
            height: 28px;
            background: var(--soft-blue);
            color: white;
            border-radius: 50%;
            font-size: 0.85em;
            font-weight: 700;
            line-height: 28px;
            margin-bottom: 8px;
        }

        .nav-card.active .card-number { background: var(--rust); }

        .nav-card h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1em;
            color: var(--dark-burgundy);
            margin: 0;
            line-height: 1.3;
        }

        .experiment-area {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .experiment-area.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .experiment-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2em;
            color: var(--dark-burgundy);
            margin-bottom: 15px;
            text-align: center;
        }

        .experiment-instructions {
            background: rgba(146, 164, 210, 0.1);
            border-left: 4px solid var(--soft-blue);
            padding: 20px 25px;
            border-radius: 8px;
            margin-bottom: 30px;
            font-size: 1em;
            line-height: 1.7;
        }

        .display-area {
            background: linear-gradient(135deg, var(--dark-burgundy) 0%, #4a1a1b 100%);
            border-radius: 16px;
            padding: 60px 40px;
            text-align: center;
            margin-bottom: 25px;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .word-display {
            font-family: 'Cormorant Garamond', serif;
            font-size: 3.5em;
            color: white;
            font-weight: 600;
            letter-spacing: 2px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .btn {
            background: linear-gradient(135deg, var(--rust) 0%, var(--dark-burgundy) 100%);
            color: white;
            border: none;
            padding: 14px 32px;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(117, 53, 45, 0.25);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(117, 53, 45, 0.35);
        }

        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

        .btn.secondary {
            background: white;
            color: var(--rust);
            border: 2px solid var(--rust);
            box-shadow: none;
        }

        .btn.secondary:hover { background: var(--cream); }

        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 25px 0;
        }

        .input-area {
            background: #fafafa;
            border-radius: 12px;
            padding: 30px;
            margin: 25px 0;
        }

        .word-input {
            width: 100%;
            padding: 15px 20px;
            font-size: 1.1em;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            transition: border-color 0.3s ease;
        }

        .word-input:focus {
            outline: none;
            border-color: var(--soft-blue);
            box-shadow: 0 0 0 3px rgba(146, 164, 210, 0.2);
        }

        .recalled-words {
            margin-top: 20px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e8e8e8;
            min-height: 60px;
        }

        .recalled-words span { color: var(--rust); font-weight: 500; }

        .results-section { display: none; animation: fadeIn 0.5s ease; }
        .results-section.active { display: block; }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #fafafa 0%, white 100%);
            border: 2px solid #e8e8e8;
            border-radius: 12px;
            padding: 25px 15px;
            text-align: center;
        }

        .stat-label {
            font-size: 0.85em;
            color: var(--rust);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .stat-value {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.5em;
            color: var(--dark-burgundy);
            font-weight: 700;
        }

        .chart-container {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
            border: 1px solid #e8e8e8;
        }

        .chart-container canvas { max-height: 350px; }

        .explanation {
            background: linear-gradient(135deg, rgba(146, 164, 210, 0.1) 0%, rgba(146, 164, 210, 0.05) 100%);
            border-left: 4px solid var(--soft-blue);
            border-radius: 8px;
            padding: 25px 30px;
            margin: 25px 0;
        }

        .explanation h4 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.4em;
            color: var(--dark-burgundy);
            margin-bottom: 12px;
        }

        .explanation p { color: #444; line-height: 1.7; margin-bottom: 10px; }
        .explanation p:last-child { margin-bottom: 0; }

        .teaching-application {
            background: linear-gradient(135deg, var(--cream) 0%, #f8ece0 100%);
            border-left: 4px solid var(--rust);
            border-radius: 8px;
            padding: 25px 30px;
            margin: 25px 0;
        }

        .teaching-application h4 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.4em;
            color: var(--dark-burgundy);
            margin-bottom: 12px;
        }

        .teaching-application p { color: #444; line-height: 1.7; }

        .memory-grid-container { display: flex; justify-content: center; margin: 30px 0; }

        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            max-width: 400px;
            width: 100%;
        }

        .grid-cell {
            aspect-ratio: 1;
            background: #e8e8e8;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 3px solid transparent;
        }

        .grid-cell:hover { background: #d8d8d8; }
        .grid-cell.highlighted { background: var(--soft-blue); box-shadow: 0 0 20px rgba(146, 164, 210, 0.5); }
        .grid-cell.selected { background: var(--rust); border-color: var(--dark-burgundy); }
        .grid-cell.correct { background: var(--sage); }
        .grid-cell.incorrect { background: #e57373; }

        .question-card {
            background: white;
            border: 2px solid #e8e8e8;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            margin: 20px 0;
        }

        .question-word {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.5em;
            color: var(--dark-burgundy);
            margin-bottom: 15px;
            font-weight: 600;
        }

        .question-text { font-size: 1.1em; color: #555; margin-bottom: 20px; }

        .question-type {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .question-type.shallow { background: rgba(146, 164, 210, 0.2); color: var(--soft-blue); }
        .question-type.medium { background: rgba(127, 168, 168, 0.2); color: var(--sage); }
        .question-type.deep { background: rgba(117, 53, 45, 0.15); color: var(--rust); }

        .answer-buttons { display: flex; gap: 15px; justify-content: center; }

        .answer-btn {
            padding: 12px 40px;
            font-size: 1em;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: 'Inter', sans-serif;
        }

        .answer-btn.yes { background: var(--sage); color: white; border: none; }
        .answer-btn.no { background: white; color: var(--rust); border: 2px solid var(--rust); }
        .answer-btn:hover { transform: scale(1.05); }

        .recognition-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }

        .recognition-word {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .recognition-word:hover { border-color: var(--soft-blue); background: rgba(146, 164, 210, 0.05); }
        .recognition-word.selected { border-color: var(--rust); background: var(--cream); }

        .progress-bar { height: 6px; background: #e8e8e8; border-radius: 3px; margin: 20px 0; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--soft-blue), var(--sage)); border-radius: 3px; transition: width 0.3s ease; }
        .progress-text { text-align: center; color: var(--rust); font-weight: 600; font-size: 0.9em; }

        /* Navigation Container */
        .nav-container {
            background: linear-gradient(135deg, #fafafa 0%, #f5f0eb 100%);
            border: 2px solid #e8e8e8;
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .nav-container h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.3em;
            color: var(--dark-burgundy);
            margin-bottom: 15px;
            text-align: center;
        }

        /* Demo Container */
        .demo-content-container {
            background: white;
            border: 2px solid var(--soft-blue);
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 40px;
        }

        /* Embed Section */
        .embed-section {
            background: linear-gradient(135deg, var(--cream) 0%, #f8ece0 100%);
            border-radius: 16px;
            padding: 35px;
            margin-top: 40px;
            border: 2px solid var(--rust);
        }

        .embed-section h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.8em;
            color: var(--dark-burgundy);
            margin-bottom: 15px;
            text-align: center;
        }

        .embed-section p {
            text-align: center;
            margin-bottom: 20px;
            color: #555;
        }

        .embed-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .embed-btn {
            background: var(--rust);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 0.95em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .embed-btn:hover {
            background: var(--dark-burgundy);
            transform: translateY(-2px);
        }

        .embed-btn.secondary {
            background: white;
            color: var(--rust);
            border: 2px solid var(--rust);
        }

        .embed-btn.secondary:hover {
            background: var(--cream);
        }

        .embed-note {
            margin-top: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            font-size: 0.9em;
            color: #666;
            text-align: center;
        }

        @media (max-width: 768px) {
            .demo-container { padding: 30px 20px; }
            h1 { font-size: 2.2em; }
            .experiment-nav { grid-template-columns: repeat(2, 1fr); }
            .word-display { font-size: 2.5em; }
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
            .memory-grid { max-width: 300px; gap: 8px; }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-button">← Back to Interactive Demos</a>

    <div class="demo-container">
        <div class="header">
            <h1>Memory Lab</h1>
            <p class="subtitle">Interactive Experiments in Cognitive Psychology</p>
        </div>

        <div class="intro-text">
            <strong>Welcome to the Memory Lab!</strong> These experiments demonstrate key principles of how memory works. Complete each experiment to see your own results, then discover what the findings mean for teaching and learning.
        </div>

        <div class="nav-container">
            <h3>Choose an Experiment</h3>
            <div class="experiment-nav">
                <div class="nav-card active" onclick="selectExperiment('serial', this)">
                    <span class="card-number">1</span>
                    <h3>Serial Position Effect</h3>
                </div>
                <div class="nav-card" onclick="selectExperiment('levels', this)">
                    <span class="card-number">2</span>
                    <h3>Levels of Processing</h3>
                </div>
                <div class="nav-card" onclick="selectExperiment('working', this)">
                    <span class="card-number">3</span>
                    <h3>Working Memory Span</h3>
                </div>
                <div class="nav-card" onclick="selectExperiment('false', this)">
                    <span class="card-number">4</span>
                    <h3>False Memory</h3>
                </div>
                <div class="nav-card" onclick="selectExperiment('recognition', this)">
                    <span class="card-number">5</span>
                    <h3>Recognition vs Recall</h3>
                </div>
            </div>
        </div>

        <div class="demo-content-container" id="demo-container">

        <!-- EXPERIMENT 1: SERIAL POSITION -->
        <div class="experiment-area active" id="serial-experiment">
            <h2 class="experiment-title">Serial Position Effect</h2>
            <div class="experiment-instructions">
                <strong>Instructions:</strong> You'll see 15 words, one at a time. Pay attention and try to remember them all. Afterward, type out as many words as you can recall in any order.
            </div>
            <div id="serial-display">
                <div class="display-area"><div class="word-display" id="serial-word">Ready?</div></div>
                <div class="button-group"><button class="btn" onclick="startSerial()" id="serial-start-btn">Start Experiment</button></div>
            </div>
            <div class="input-area" id="serial-input" style="display: none;">
                <p style="margin-bottom: 15px; font-weight: 600;">Type the words you remember (press Enter after each):</p>
                <input type="text" class="word-input" id="serial-recall-input" placeholder="Type a word and press Enter">
                <div class="recalled-words"><strong>Words recalled:</strong> <span id="serial-recalled-list"></span></div>
                <div class="button-group"><button class="btn" onclick="finishSerial()">See Results</button></div>
            </div>
            <div class="results-section" id="serial-results">
                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-label">Total Recalled</div><div class="stat-value" id="serial-total">0</div></div>
                    <div class="stat-card"><div class="stat-label">Accuracy</div><div class="stat-value" id="serial-accuracy">0%</div></div>
                    <div class="stat-card"><div class="stat-label">Effect Found</div><div class="stat-value" id="serial-effect">—</div></div>
                </div>
                <div class="chart-container"><canvas id="serial-chart"></canvas></div>
                <div class="explanation">
                    <h4>What This Reveals</h4>
                    <p>The <strong>serial position effect</strong> shows that items at the beginning (primacy) and end (recency) of a list are remembered better than middle items.</p>
                    <p><strong>Primacy:</strong> Early items get more rehearsal and transfer to long-term memory. <strong>Recency:</strong> Recent items are still in working memory when recall begins.</p>
                </div>
                <div class="teaching-application">
                    <h4>Teaching Application</h4>
                    <p>Present the most important information at the <strong>beginning</strong> and <strong>end</strong> of lessons. Use the middle for practice, examples, and elaboration rather than introducing new key concepts.</p>
                </div>
                <div class="button-group"><button class="btn secondary" onclick="resetSerial()">Try Again</button></div>
            </div>
        </div>

        <!-- EXPERIMENT 2: LEVELS OF PROCESSING -->
        <div class="experiment-area" id="levels-experiment">
            <h2 class="experiment-title">Levels of Processing</h2>
            <div class="experiment-instructions">
                <strong>Instructions:</strong> You'll see words and answer simple questions about each one. Just answer honestly based on the question. After all questions, there will be a memory test.
            </div>
            <div id="levels-display">
                <div class="progress-bar"><div class="progress-fill" id="levels-progress" style="width: 0%"></div></div>
                <p class="progress-text" id="levels-progress-text">Question 0 of 18</p>
                <div class="question-card" id="levels-question-card" style="display: none;">
                    <div class="question-word" id="levels-word">WORD</div>
                    <p class="question-text" id="levels-question">Question goes here?</p>
                    <div class="answer-buttons">
                        <button class="answer-btn yes" onclick="answerLevels(true)">Yes</button>
                        <button class="answer-btn no" onclick="answerLevels(false)">No</button>
                    </div>
                </div>
                <div class="button-group" id="levels-start-area"><button class="btn" onclick="startLevels()">Start Experiment</button></div>
            </div>
            <div class="input-area" id="levels-recall" style="display: none;">
                <h3 style="font-family: 'Cormorant Garamond', serif; color: var(--dark-burgundy); margin-bottom: 15px; font-size: 1.5em;">Surprise Recall Test!</h3>
                <p style="margin-bottom: 15px;">Type all the words you can remember from the questions:</p>
                <input type="text" class="word-input" id="levels-recall-input" placeholder="Type a word and press Enter">
                <div class="recalled-words"><strong>Words recalled:</strong> <span id="levels-recalled-list"></span></div>
                <div class="button-group"><button class="btn" onclick="finishLevels()">See Results</button></div>
            </div>
            <div class="results-section" id="levels-results">
                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-label">Shallow (Visual)</div><div class="stat-value" id="levels-shallow">0%</div></div>
                    <div class="stat-card"><div class="stat-label">Medium (Sound)</div><div class="stat-value" id="levels-medium">0%</div></div>
                    <div class="stat-card"><div class="stat-label">Deep (Meaning)</div><div class="stat-value" id="levels-deep">0%</div></div>
                </div>
                <div class="chart-container"><canvas id="levels-chart"></canvas></div>
                <div class="explanation">
                    <h4>What This Reveals</h4>
                    <p>The <strong>levels of processing</strong> effect shows that how deeply we process information affects how well we remember it. Thinking about a word's <strong>meaning</strong> (semantic processing) creates stronger memory traces than thinking about its appearance or sound.</p>
                </div>
                <div class="teaching-application">
                    <h4>Teaching Application</h4>
                    <p>Don't just expose students to information—ask them to <strong>engage meaningfully</strong>. Have them make connections, evaluate ideas, explain concepts, or apply knowledge. Active deep processing beats passive exposure.</p>
                </div>
                <div class="button-group"><button class="btn secondary" onclick="resetLevels()">Try Again</button></div>
            </div>
        </div>

        <!-- EXPERIMENT 3: WORKING MEMORY -->
        <div class="experiment-area" id="working-experiment">
            <h2 class="experiment-title">Working Memory Span</h2>
            <div class="experiment-instructions">
                <strong>Instructions:</strong> Watch as squares light up in sequence. Then click the squares in the same order they appeared. The sequence gets longer each round. How far can you go?
            </div>
            <div id="working-display">
                <div class="progress-text" id="working-level">Level: 3 squares</div>
                <div class="memory-grid-container"><div class="memory-grid" id="memory-grid"></div></div>
                <div class="button-group" id="working-buttons">
                    <button class="btn" onclick="startWorking()" id="working-start-btn">Start Experiment</button>
                    <button class="btn secondary" onclick="submitWorking()" id="working-submit-btn" style="display: none;">Check Answer</button>
                </div>
                <p class="progress-text" id="working-status">Press Start to begin</p>
            </div>
            <div class="results-section" id="working-results">
                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-label">Max Span</div><div class="stat-value" id="working-max">0</div></div>
                    <div class="stat-card"><div class="stat-label">Rounds Completed</div><div class="stat-value" id="working-rounds">0</div></div>
                </div>
                <div class="explanation">
                    <h4>What This Reveals</h4>
                    <p><strong>Working memory</strong> has limited capacity—typically around 4 items for complex spatial patterns, though this varies by individual and task type. When we exceed this capacity, performance drops rapidly.</p>
                </div>
                <div class="teaching-application">
                    <h4>Teaching Application</h4>
                    <p>Don't overload students with too much new information at once. <strong>Chunk content</strong> into manageable pieces, provide scaffolding, and allow time for processing before adding more material.</p>
                </div>
                <div class="button-group"><button class="btn secondary" onclick="resetWorking()">Try Again</button></div>
            </div>
        </div>

        <!-- EXPERIMENT 4: FALSE MEMORY -->
        <div class="experiment-area" id="false-experiment">
            <h2 class="experiment-title">False Memory (DRM Paradigm)</h2>
            <div class="experiment-instructions">
                <strong>Instructions:</strong> You'll see a list of related words. Study them carefully. Then you'll be tested on which words you saw.
            </div>
            <div id="false-display">
                <div class="display-area"><div class="word-display" id="false-word">Ready?</div></div>
                <div class="button-group"><button class="btn" onclick="startFalse()" id="false-start-btn">Start Experiment</button></div>
            </div>
            <div id="false-test" style="display: none;">
                <h3 style="font-family: 'Cormorant Garamond', serif; color: var(--dark-burgundy); text-align: center; margin-bottom: 20px; font-size: 1.5em;">Recognition Test</h3>
                <p style="text-align: center; margin-bottom: 20px;">Click all the words you remember seeing:</p>
                <div class="recognition-grid" id="false-grid"></div>
                <div class="button-group"><button class="btn" onclick="finishFalse()">See Results</button></div>
            </div>
            <div class="results-section" id="false-results">
                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-label">Correct Hits</div><div class="stat-value" id="false-hits">0</div></div>
                    <div class="stat-card"><div class="stat-label">Unrelated Errors</div><div class="stat-value" id="false-alarms">0</div></div>
                    <div class="stat-card"><div class="stat-label">Critical Lure (SLEEP)</div><div class="stat-value" id="false-lure">—</div></div>
                </div>
                <div class="explanation">
                    <h4>What This Reveals</h4>
                    <p>The <strong>DRM paradigm</strong> shows how easily false memories form. Most people confidently "remember" seeing the word <strong>SLEEP</strong>—even though it was never shown!</p>
                    <p>The critical lure (SLEEP) is tracked separately from unrelated errors because it's THE key measure: your brain constructed a false memory from the semantic associations of words like bed, tired, dream, pillow, etc.</p>
                </div>
                <div class="teaching-application">
                    <h4>Teaching Application</h4>
                    <p>Test students' <strong>actual understanding</strong>, not just familiarity. Use retrieval practice to reveal what students truly know versus what merely seems familiar. Address misconceptions directly.</p>
                </div>
                <div class="button-group"><button class="btn secondary" onclick="resetFalse()">Try Again</button></div>
            </div>
        </div>

        <!-- EXPERIMENT 5: RECOGNITION VS RECALL -->
        <div class="experiment-area" id="recognition-experiment">
            <h2 class="experiment-title">Recognition vs Recall</h2>
            <div class="experiment-instructions">
                <strong>Instructions:</strong> First, you'll see a list of words to study. Then you'll complete two tests: a recall test (like short answer) and a recognition test (like multiple choice). Compare your performance!
            </div>
            <div id="recognition-display">
                <div class="display-area"><div class="word-display" id="recognition-word">Ready?</div></div>
                <div class="button-group"><button class="btn" onclick="startRecognition()" id="recognition-start-btn">Start Experiment</button></div>
            </div>
            <div class="input-area" id="recognition-recall" style="display: none;">
                <h3 style="font-family: 'Cormorant Garamond', serif; color: var(--dark-burgundy); margin-bottom: 15px; font-size: 1.5em;">Recall Test (Short Answer Style)</h3>
                <p style="margin-bottom: 15px;">Type all the words you remember:</p>
                <input type="text" class="word-input" id="recognition-recall-input" placeholder="Type a word and press Enter">
                <div class="recalled-words"><strong>Words recalled:</strong> <span id="recognition-recalled-list"></span></div>
                <div class="button-group"><button class="btn" onclick="startRecognitionTest()">Continue to Recognition Test</button></div>
            </div>
            <div id="recognition-test" style="display: none;">
                <h3 style="font-family: 'Cormorant Garamond', serif; color: var(--dark-burgundy); text-align: center; margin-bottom: 20px; font-size: 1.5em;">Recognition Test (Multiple Choice Style)</h3>
                <p style="text-align: center; margin-bottom: 20px;">Click all the words you remember seeing:</p>
                <div class="recognition-grid" id="recognition-grid"></div>
                <div class="button-group"><button class="btn" onclick="finishRecognition()">See Results</button></div>
            </div>
            <div class="results-section" id="recognition-results">
                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-label">Recall Score</div><div class="stat-value" id="recognition-recall-score">0%</div></div>
                    <div class="stat-card"><div class="stat-label">Recognition Score</div><div class="stat-value" id="recognition-recog-score">0%</div></div>
                    <div class="stat-card"><div class="stat-label">Difference</div><div class="stat-value" id="recognition-diff">+0%</div></div>
                </div>
                <div class="chart-container"><canvas id="recognition-chart"></canvas></div>
                <div class="explanation">
                    <h4>What This Reveals</h4>
                    <p><strong>Recognition is easier than recall</strong> because it only requires familiarity—you just need to identify something as "seen before." Recall requires actively reconstructing information from memory without cues, which is much more demanding.</p>
                </div>
                <div class="teaching-application">
                    <h4>Teaching Application</h4>
                    <p>Multiple choice tests may <strong>overestimate</strong> what students actually know. Use a mix of assessment types. Practice retrieval (recall) to build stronger, more accessible memories.</p>
                </div>
                <div class="button-group"><button class="btn secondary" onclick="resetRecognition()">Try Again</button></div>
            </div>
        </div>
        </div><!-- End demo-content-container -->

        <!-- Embed Section -->
        <div class="embed-section">
            <h3>Use This Demo in Your Teaching</h3>
            <p>This demo is self-contained and can be embedded in Blackboard, Canvas, Moodle, or any website.</p>
            
            <div class="embed-buttons">
                <button class="embed-btn" onclick="copyDemoCode()">Copy HTML Code</button>
                <button class="embed-btn secondary" onclick="downloadDemo()">Download HTML File</button>
            </div>
            
            <div class="embed-note">
                <strong>How to use:</strong> Copy the code and paste it into your LMS's HTML editor, or download the file and upload it directly. The demo works completely offline with no external dependencies.
            </div>
        </div>
    </div>

    <script>
        let currentExperiment = 'serial';
        let charts = {};

        function selectExperiment(exp, element) {
            currentExperiment = exp;
            document.querySelectorAll('.nav-card').forEach(card => card.classList.remove('active'));
            element.classList.add('active');
            document.querySelectorAll('.experiment-area').forEach(area => area.classList.remove('active'));
            document.getElementById(exp + '-experiment').classList.add('active');
            
            // Scroll to demo container
            setTimeout(() => {
                document.getElementById('demo-container').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);
        }

        // === SERIAL POSITION ===
        const serialWords = ['APPLE', 'MOUNTAIN', 'BICYCLE', 'SUNSET', 'VIOLIN', 'RIVER', 'COFFEE', 'DIAMOND', 'FOREST', 'CASTLE', 'OCEAN', 'THUNDER', 'GARDEN', 'SILVER', 'CANDLE'];
        let serialRecalled = [];

        function startSerial() {
            document.getElementById('serial-start-btn').style.display = 'none';
            let index = 0;
            const interval = setInterval(() => {
                if (index < serialWords.length) {
                    document.getElementById('serial-word').textContent = serialWords[index];
                    index++;
                } else {
                    clearInterval(interval);
                    document.getElementById('serial-word').textContent = 'Recall time!';
                    setTimeout(() => {
                        document.getElementById('serial-display').style.display = 'none';
                        document.getElementById('serial-input').style.display = 'block';
                        document.getElementById('serial-recall-input').focus();
                    }, 1000);
                }
            }, 1500);
        }

        document.addEventListener('DOMContentLoaded', () => {
            ['serial', 'levels', 'recognition'].forEach(prefix => {
                const input = document.getElementById(prefix + '-recall-input');
                if (input) {
                    input.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            const word = input.value.trim().toUpperCase();
                            const list = prefix === 'serial' ? serialRecalled : prefix === 'levels' ? levelsRecalled : recognitionRecalled;
                            if (word && !list.includes(word)) {
                                list.push(word);
                                document.getElementById(prefix + '-recalled-list').textContent = list.join(', ');
                            }
                            input.value = '';
                        }
                    });
                }
            });
            initWorkingGrid();
        });

        function finishSerial() {
            document.getElementById('serial-input').style.display = 'none';
            document.getElementById('serial-results').classList.add('active');
            const positions = new Array(15).fill(0);
            serialRecalled.forEach(word => { const idx = serialWords.indexOf(word); if (idx !== -1) positions[idx] = 1; });
            const correct = positions.filter(p => p === 1).length;
            document.getElementById('serial-total').textContent = correct;
            document.getElementById('serial-accuracy').textContent = Math.round((correct / 15) * 100) + '%';
            const firstThird = positions.slice(0, 5).filter(p => p === 1).length;
            const middleThird = positions.slice(5, 10).filter(p => p === 1).length;
            const lastThird = positions.slice(10, 15).filter(p => p === 1).length;
            document.getElementById('serial-effect').textContent = (firstThird > middleThird || lastThird > middleThird) ? 'Yes!' : 'Weak';
            if (charts.serial) charts.serial.destroy();
            charts.serial = new Chart(document.getElementById('serial-chart'), {
                type: 'bar',
                data: { labels: serialWords.map((_, i) => i + 1), datasets: [{ label: 'Recalled', data: positions, backgroundColor: positions.map((_, i) => i < 5 ? 'rgba(146, 164, 210, 0.8)' : i >= 10 ? 'rgba(127, 168, 168, 0.8)' : 'rgba(117, 53, 45, 0.5)'), borderColor: positions.map((_, i) => i < 5 ? '#92A4D2' : i >= 10 ? '#7fa8a8' : '#75352D'), borderWidth: 2 }] },
                options: { responsive: true, plugins: { legend: { display: false }, title: { display: true, text: 'Recall by Position (1=First, 15=Last)', font: { size: 14 } } }, scales: { y: { beginAtZero: true, max: 1, ticks: { display: false } }, x: { title: { display: true, text: 'Word Position' } } } }
            });
        }

        function resetSerial() {
            serialRecalled = [];
            document.getElementById('serial-recalled-list').textContent = '';
            document.getElementById('serial-results').classList.remove('active');
            document.getElementById('serial-input').style.display = 'none';
            document.getElementById('serial-display').style.display = 'block';
            document.getElementById('serial-start-btn').style.display = 'inline-block';
            document.getElementById('serial-word').textContent = 'Ready?';
        }

        // === LEVELS OF PROCESSING ===
        // Proper Craik & Tulving paradigm with yes/no balance at each level
        const levelsWords = [
            // Shallow (structural) - YES answers
            { word: 'TIGER', question: 'Is this word in capital letters?', type: 'shallow', correctAnswer: true },
            { word: 'HOUSE', question: 'Does this word have 5 letters?', type: 'shallow', correctAnswer: true },
            { word: 'garden', question: 'Is this word in lowercase?', type: 'shallow', correctAnswer: true },
            // Shallow - NO answers
            { word: 'RIVER', question: 'Is this word in lowercase?', type: 'shallow', correctAnswer: false },
            { word: 'book', question: 'Does this word have 6 letters?', type: 'shallow', correctAnswer: false },
            { word: 'CASTLE', question: 'Does this word start with "B"?', type: 'shallow', correctAnswer: false },
            
            // Medium (phonemic) - YES answers  
            { word: 'TRAIN', question: 'Does this rhyme with "rain"?', type: 'medium', correctAnswer: true },
            { word: 'CHAIR', question: 'Does this rhyme with "hair"?', type: 'medium', correctAnswer: true },
            { word: 'NIGHT', question: 'Does this rhyme with "light"?', type: 'medium', correctAnswer: true },
            // Medium - NO answers
            { word: 'BREAD', question: 'Does this rhyme with "speed"?', type: 'medium', correctAnswer: false },
            { word: 'PIANO', question: 'Does this rhyme with "volcano"?', type: 'medium', correctAnswer: false },
            { word: 'DOCTOR', question: 'Does this rhyme with "tractor"?', type: 'medium', correctAnswer: false },
            
            // Deep (semantic) - YES answers
            { word: 'EAGLE', question: 'Is this something that can fly?', type: 'deep', correctAnswer: true },
            { word: 'APPLE', question: 'Is this a type of fruit?', type: 'deep', correctAnswer: true },
            { word: 'HAMMER', question: 'Is this a tool?', type: 'deep', correctAnswer: true },
            // Deep - NO answers
            { word: 'TABLE', question: 'Is this something you can eat?', type: 'deep', correctAnswer: false },
            { word: 'PENCIL', question: 'Is this a musical instrument?', type: 'deep', correctAnswer: false },
            { word: 'WINDOW', question: 'Is this a type of animal?', type: 'deep', correctAnswer: false }
        ];
        let levelsData = [], levelsIndex = 0, levelsRecalled = [], levelsQuestions = [];

        function startLevels() {
            document.getElementById('levels-start-area').style.display = 'none';
            // Shuffle the questions
            levelsQuestions = [...levelsWords];
            for (let i = levelsQuestions.length - 1; i > 0; i--) { 
                const j = Math.floor(Math.random() * (i + 1)); 
                [levelsQuestions[i], levelsQuestions[j]] = [levelsQuestions[j], levelsQuestions[i]]; 
            }
            levelsData = []; levelsIndex = 0; showLevelsQuestion();
        }

        function showLevelsQuestion() {
            const q = levelsQuestions[levelsIndex];
            document.getElementById('levels-question-card').style.display = 'block';
            document.getElementById('levels-word').textContent = q.word;
            document.getElementById('levels-question').textContent = q.question;
            document.getElementById('levels-progress').style.width = ((levelsIndex / levelsQuestions.length) * 100) + '%';
            document.getElementById('levels-progress-text').textContent = `Question ${levelsIndex + 1} of ${levelsQuestions.length}`;
        }

        function answerLevels(answer) {
            levelsData.push({ word: levelsQuestions[levelsIndex].word, type: levelsQuestions[levelsIndex].type });
            levelsIndex++;
            if (levelsIndex < levelsQuestions.length) { showLevelsQuestion(); }
            else { document.getElementById('levels-display').style.display = 'none'; document.getElementById('levels-recall').style.display = 'block'; document.getElementById('levels-recall-input').focus(); }
        }

        function finishLevels() {
            document.getElementById('levels-recall').style.display = 'none';
            document.getElementById('levels-results').classList.add('active');
            
            // Count words by type and which were recalled
            const wordsByType = { shallow: [], medium: [], deep: [] };
            levelsData.forEach(item => wordsByType[item.type].push(item.word.toUpperCase()));
            
            const recalledByType = { shallow: 0, medium: 0, deep: 0 };
            levelsRecalled.forEach(word => {
                ['shallow', 'medium', 'deep'].forEach(type => {
                    if (wordsByType[type].includes(word)) recalledByType[type]++;
                });
            });
            
            const shallowPct = wordsByType.shallow.length > 0 ? Math.round((recalledByType.shallow / wordsByType.shallow.length) * 100) : 0;
            const mediumPct = wordsByType.medium.length > 0 ? Math.round((recalledByType.medium / wordsByType.medium.length) * 100) : 0;
            const deepPct = wordsByType.deep.length > 0 ? Math.round((recalledByType.deep / wordsByType.deep.length) * 100) : 0;
            document.getElementById('levels-shallow').textContent = shallowPct + '%';
            document.getElementById('levels-medium').textContent = mediumPct + '%';
            document.getElementById('levels-deep').textContent = deepPct + '%';
            if (charts.levels) charts.levels.destroy();
            charts.levels = new Chart(document.getElementById('levels-chart'), {
                type: 'bar', data: { labels: ['Shallow (Visual)', 'Medium (Sound)', 'Deep (Meaning)'], datasets: [{ data: [shallowPct, mediumPct, deepPct], backgroundColor: ['rgba(146, 164, 210, 0.7)', 'rgba(127, 168, 168, 0.7)', 'rgba(117, 53, 45, 0.7)'], borderColor: ['#92A4D2', '#7fa8a8', '#75352D'], borderWidth: 2 }] },
                options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, max: 100, title: { display: true, text: '% Recalled' } } } }
            });
        }

        function resetLevels() {
            levelsRecalled = []; levelsIndex = 0;
            document.getElementById('levels-recalled-list').textContent = '';
            document.getElementById('levels-results').classList.remove('active');
            document.getElementById('levels-recall').style.display = 'none';
            document.getElementById('levels-question-card').style.display = 'none';
            document.getElementById('levels-display').style.display = 'block';
            document.getElementById('levels-start-area').style.display = 'block';
            document.getElementById('levels-progress').style.width = '0%';
            document.getElementById('levels-progress-text').textContent = 'Question 0 of 18';
        }

        // === WORKING MEMORY ===
        let workingSequence = [], workingUserSequence = [], workingLevel = 3, workingMaxLevel = 0, workingRounds = 0, workingPhase = 'waiting';

        function initWorkingGrid() {
            const grid = document.getElementById('memory-grid');
            if (!grid) return;
            grid.innerHTML = '';
            for (let i = 0; i < 16; i++) {
                const cell = document.createElement('div');
                cell.className = 'grid-cell';
                cell.dataset.index = i;
                cell.onclick = () => clickWorkingCell(i);
                grid.appendChild(cell);
            }
        }

        function startWorking() {
            initWorkingGrid();
            workingLevel = 3; workingMaxLevel = 0; workingRounds = 0;
            document.getElementById('working-results').classList.remove('active');
            playWorkingRound();
        }

        function playWorkingRound() {
            workingPhase = 'showing'; workingSequence = []; workingUserSequence = [];
            document.getElementById('working-start-btn').style.display = 'none';
            document.getElementById('working-submit-btn').style.display = 'none';
            document.getElementById('working-level').textContent = `Level: ${workingLevel} squares`;
            document.getElementById('working-status').textContent = 'Watch carefully...';
            const available = [...Array(16).keys()];
            for (let i = 0; i < workingLevel; i++) { const idx = Math.floor(Math.random() * available.length); workingSequence.push(available.splice(idx, 1)[0]); }
            let showIndex = 0;
            const cells = document.querySelectorAll('.grid-cell');
            const showInterval = setInterval(() => {
                cells.forEach(c => c.classList.remove('highlighted'));
                if (showIndex < workingSequence.length) { cells[workingSequence[showIndex]].classList.add('highlighted'); showIndex++; }
                else { clearInterval(showInterval); setTimeout(() => { cells.forEach(c => c.classList.remove('highlighted')); workingPhase = 'input'; document.getElementById('working-status').textContent = 'Now click the squares in the same order!'; document.getElementById('working-submit-btn').style.display = 'inline-block'; }, 500); }
            }, 800);
        }

        function clickWorkingCell(index) {
            if (workingPhase !== 'input') return;
            const cell = document.querySelector(`.grid-cell[data-index="${index}"]`);
            if (cell.classList.contains('selected')) { cell.classList.remove('selected'); workingUserSequence = workingUserSequence.filter(i => i !== index); }
            else { cell.classList.add('selected'); workingUserSequence.push(index); }
            document.getElementById('working-status').textContent = `Selected: ${workingUserSequence.length} of ${workingLevel}`;
        }

        function submitWorking() {
            if (workingPhase !== 'input') return;
            workingPhase = 'checking';
            const cells = document.querySelectorAll('.grid-cell');
            let correct = workingUserSequence.length === workingSequence.length;
            if (correct) { for (let i = 0; i < workingSequence.length; i++) { if (workingUserSequence[i] !== workingSequence[i]) { correct = false; break; } } }
            workingSequence.forEach((idx, i) => { cells[idx].classList.add(workingUserSequence[i] === idx ? 'correct' : 'incorrect'); });
            workingRounds++;
            if (correct) {
                workingMaxLevel = Math.max(workingMaxLevel, workingLevel);
                document.getElementById('working-status').textContent = 'Correct! Moving to next level...';
                workingLevel++;
                setTimeout(() => { cells.forEach(c => c.classList.remove('selected', 'correct', 'incorrect')); playWorkingRound(); }, 1500);
            } else {
                document.getElementById('working-status').textContent = `Game over! Your max span was ${workingMaxLevel} items.`;
                document.getElementById('working-max').textContent = workingMaxLevel;
                document.getElementById('working-rounds').textContent = workingRounds;
                setTimeout(() => { document.getElementById('working-results').classList.add('active'); }, 1000);
            }
        }

        function resetWorking() {
            document.querySelectorAll('.grid-cell').forEach(c => c.classList.remove('selected', 'correct', 'incorrect', 'highlighted'));
            document.getElementById('working-results').classList.remove('active');
            document.getElementById('working-start-btn').style.display = 'inline-block';
            document.getElementById('working-submit-btn').style.display = 'none';
            document.getElementById('working-level').textContent = 'Level: 3 squares';
            document.getElementById('working-status').textContent = 'Press Start to begin';
            workingPhase = 'waiting';
        }

        // === FALSE MEMORY ===
        const falseStudyWords = ['BED', 'REST', 'TIRED', 'DREAM', 'WAKE', 'SNOOZE', 'BLANKET', 'DOZE', 'SLUMBER', 'SNORE', 'NAP', 'DROWSY', 'PILLOW', 'YAWN', 'NIGHT'];
        const falseLure = 'SLEEP';
        const falseDistractors = ['TREE', 'CAR', 'BOOK', 'PHONE', 'LAMP', 'DESK', 'WATER', 'CLOCK'];
        let falseSelected = [];

        function startFalse() {
            document.getElementById('false-start-btn').style.display = 'none';
            let index = 0;
            const interval = setInterval(() => {
                if (index < falseStudyWords.length) { document.getElementById('false-word').textContent = falseStudyWords[index]; index++; }
                else { clearInterval(interval); document.getElementById('false-word').textContent = 'Get ready for the test...'; setTimeout(() => { document.getElementById('false-display').style.display = 'none'; showFalseTest(); }, 2000); }
            }, 1200);
        }

        function showFalseTest() {
            document.getElementById('false-test').style.display = 'block';
            const testWords = [...falseStudyWords.slice(0, 8), falseLure, ...falseDistractors.slice(0, 6)];
            for (let i = testWords.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [testWords[i], testWords[j]] = [testWords[j], testWords[i]]; }
            const grid = document.getElementById('false-grid');
            grid.innerHTML = '';
            testWords.forEach(word => {
                const div = document.createElement('div');
                div.className = 'recognition-word';
                div.textContent = word;
                div.onclick = () => { div.classList.toggle('selected'); if (div.classList.contains('selected')) falseSelected.push(word); else falseSelected = falseSelected.filter(w => w !== word); };
                grid.appendChild(div);
            });
        }

        function finishFalse() {
            document.getElementById('false-test').style.display = 'none';
            document.getElementById('false-results').classList.add('active');
            const hits = falseSelected.filter(w => falseStudyWords.includes(w)).length;
            const falseAlarms = falseSelected.filter(w => !falseStudyWords.includes(w) && w !== falseLure).length;
            const selectedLure = falseSelected.includes(falseLure);
            document.getElementById('false-hits').textContent = hits + '/8';
            document.getElementById('false-alarms').textContent = falseAlarms;
            document.getElementById('false-lure').textContent = selectedLure ? 'Selected!' : 'Avoided';
            document.getElementById('false-lure').style.color = selectedLure ? '#e57373' : '#7fa8a8';
        }

        function resetFalse() {
            falseSelected = [];
            document.getElementById('false-results').classList.remove('active');
            document.getElementById('false-test').style.display = 'none';
            document.getElementById('false-display').style.display = 'block';
            document.getElementById('false-start-btn').style.display = 'inline-block';
            document.getElementById('false-word').textContent = 'Ready?';
        }

        // === RECOGNITION VS RECALL ===
        const recognitionStudyWords = ['ELEPHANT', 'GUITAR', 'BUTTERFLY', 'MOUNTAIN', 'TELESCOPE', 'LIGHTHOUSE', 'UMBRELLA', 'CHOCOLATE', 'DINOSAUR', 'WATERFALL', 'TREASURE', 'RAINBOW'];
        const recognitionDistractors = ['GIRAFFE', 'PIANO', 'SPIDER', 'VOLCANO', 'MICROSCOPE', 'SKYSCRAPER', 'RAINCOAT', 'VANILLA', 'MAMMOTH', 'FOUNTAIN', 'FORTUNE', 'SUNSET'];
        let recognitionRecalled = [], recognitionSelected = [];

        function startRecognition() {
            document.getElementById('recognition-start-btn').style.display = 'none';
            let index = 0;
            const interval = setInterval(() => {
                if (index < recognitionStudyWords.length) { document.getElementById('recognition-word').textContent = recognitionStudyWords[index]; index++; }
                else { clearInterval(interval); document.getElementById('recognition-word').textContent = 'Time for the tests!'; setTimeout(() => { document.getElementById('recognition-display').style.display = 'none'; document.getElementById('recognition-recall').style.display = 'block'; document.getElementById('recognition-recall-input').focus(); }, 1500); }
            }, 1500);
        }

        function startRecognitionTest() {
            document.getElementById('recognition-recall').style.display = 'none';
            document.getElementById('recognition-test').style.display = 'block';
            const testWords = [...recognitionStudyWords, ...recognitionDistractors];
            for (let i = testWords.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [testWords[i], testWords[j]] = [testWords[j], testWords[i]]; }
            const grid = document.getElementById('recognition-grid');
            grid.innerHTML = '';
            testWords.forEach(word => {
                const div = document.createElement('div');
                div.className = 'recognition-word';
                div.textContent = word;
                div.onclick = () => { div.classList.toggle('selected'); if (div.classList.contains('selected')) recognitionSelected.push(word); else recognitionSelected = recognitionSelected.filter(w => w !== word); };
                grid.appendChild(div);
            });
        }

        function finishRecognition() {
            document.getElementById('recognition-test').style.display = 'none';
            document.getElementById('recognition-results').classList.add('active');
            const recallCorrect = recognitionRecalled.filter(w => recognitionStudyWords.includes(w)).length;
            const recallPct = Math.round((recallCorrect / recognitionStudyWords.length) * 100);
            const recognitionHits = recognitionSelected.filter(w => recognitionStudyWords.includes(w)).length;
            const recognitionPct = Math.round((recognitionHits / recognitionStudyWords.length) * 100);
            document.getElementById('recognition-recall-score').textContent = recallPct + '%';
            document.getElementById('recognition-recog-score').textContent = recognitionPct + '%';
            const diff = recognitionPct - recallPct;
            document.getElementById('recognition-diff').textContent = (diff >= 0 ? '+' : '') + diff + '%';
            document.getElementById('recognition-diff').style.color = diff > 0 ? '#7fa8a8' : '#75352D';
            if (charts.recognition) charts.recognition.destroy();
            charts.recognition = new Chart(document.getElementById('recognition-chart'), {
                type: 'bar', data: { labels: ['Recall (Short Answer)', 'Recognition (Multiple Choice)'], datasets: [{ data: [recallPct, recognitionPct], backgroundColor: ['rgba(117, 53, 45, 0.7)', 'rgba(146, 164, 210, 0.7)'], borderColor: ['#75352D', '#92A4D2'], borderWidth: 2 }] },
                options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, max: 100, title: { display: true, text: '% Correct' } } } }
            });
        }

        function resetRecognition() {
            recognitionRecalled = []; recognitionSelected = [];
            document.getElementById('recognition-recalled-list').textContent = '';
            document.getElementById('recognition-results').classList.remove('active');
            document.getElementById('recognition-test').style.display = 'none';
            document.getElementById('recognition-recall').style.display = 'none';
            document.getElementById('recognition-display').style.display = 'block';
            document.getElementById('recognition-start-btn').style.display = 'inline-block';
            document.getElementById('recognition-word').textContent = 'Ready?';
        }

        // === EMBED FUNCTIONS ===
        function copyDemoCode() {
            // Get the full HTML but remove the back button and embed section for clean embedding
            let code = document.documentElement.outerHTML;
            code = code.replace(/<a[^>]*class="back-button"[^>]*>.*?<\/a>/gs, '');
            code = code.replace(/<div[^>]*class="embed-section"[^>]*>[\s\S]*?<\/div>\s*(?=<\/div>\s*<script>)/g, '');
            
            navigator.clipboard.writeText(code).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                btn.style.background = 'var(--sage)';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '';
                }, 2000);
            }).catch(() => {
                // Fallback for older browsers
                const textarea = document.createElement('textarea');
                textarea.value = code;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert('Code copied to clipboard!');
            });
        }

        function downloadDemo() {
            // Get clean HTML without back button and embed section
            let code = document.documentElement.outerHTML;
            code = code.replace(/<a[^>]*class="back-button"[^>]*>.*?<\/a>/gs, '');
            code = code.replace(/<div[^>]*class="embed-section"[^>]*>[\s\S]*?<\/div>\s*(?=<\/div>\s*<script>)/g, '');
            
            const blob = new Blob([code], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'memory-lab-experiments.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
